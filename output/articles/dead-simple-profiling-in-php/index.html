<!DOCTYPE HTML>
<html lang="en">
	<head>
		<title>ZuttoNet - Dead simple performance profiling in PHP 5.3</title>

		<meta http-equiv="content-type" content="text/html; charset=iso-8859-1" />
		<meta name="Title" content="ZuttoNet Web Development" />
		<meta name="Author" content="ZuttoNet" />
		<meta name="copyright" content="2007-2011 ZuttoNet WebMedia" />
		<meta name="Language" content="en" />
		<meta name="robots" content="index,follow" />

		<link rel="stylesheet" type="text/css" media="screen" href="/main/style.css" />
		<link rel="shortcut icon" href="/images/favicon.ico" />

		<script src="http://www.google-analytics.com/urchin.js" type="text/javascript"></script>
		<script type="text/javascript">
			_uacct = "UA-2356219-1";
			urchinTracker();
		</script>
	</head>

	<body>
		<div id="wrapper">
			<div id="top_mid"></div>

			<div id="top_nav">
                <div class="menu">
    <ul>
        <li><a href="/">articles</a></li>
        <li><a href="/pages/contact">about me</a></li>
        <li><a href="http://www.github.com/rgantt">fork me on GitHub</a></li>
    </ul>
</div>
			</div>
		</div>

			<div id="middle_content_half">
				<div id="middle_left_half"></div>
				<div id="middle_right_half"></div>
			</div>

			<div id="middle_content_half_lower"></div>

			<div id="middle_content_half_mid"></div>
			<div id="content_sub">            
                <div id="article_content">
                    <h1>Dead simple performance profiling in PHP 5.3</h1>
                    <h3>By Ryan on  in <a href="http://technorati.com/tag/php" rel="tag">php</a>, <a href="http://technorati.com/tag/performance" rel="tag">performance</a>, <a href="http://technorati.com/tag/testing" rel="tag">testing</a>, <a href="http://technorati.com/tag/profiling" rel="tag">profiling</a></h3>
                    
                    <p>As of <span class="caps">PHP</span> 5.3, we have access to function literals&#8212;anonymous functions&#8212;in our code. This makes it pretty easy to wrap scope and functionality into a nice, neat little package and feed it to a utility function to do with it what it will (instead of responding only at runtime). So I wrote a function, called <code>profile</code>, which accepts a diagnostic messge and a callback which wrap around the code you are interested in profiling.</p>
<script src="https://gist.github.com/1025970.js?file=profile.php"></script><p>All this function does is record the current time in microseconds, run the callback you passed, check the time again, and then return a string representation of the execution time. Simple enough, right!? I had a hard time finding something suitably simple, though. Here&#8217;s an example of it in action:</p>
<script src="https://gist.github.com/1025970.js?file=simple_test.php"></script><p>The world of performance profiling is now your oyster. Of course, this approach is limited by the implementation details of anonymous functions. For example: if you want to globalize variables from a broader scope to use in your callback, you&#8217;ll have to import them using the <code>use</code> keyword in the definition, creating a closure.</p>
<p>This could also be broadened a bit by wrapping the profile function up into a profiling class that would save information about various closure executions. Furthermore, I make a pretty bold assumption about how I wanted the information about the execution time returned back to me; this could certainly use some abstraction. Sounds like a good evening project!</p>
					
										<div id="disqus_thread"></div>
					<script type="text/javascript">
						var disqus_shortname = 'zuttonet'; // required: replace example with your forum shortname

						// The following are highly recommended additional parameters. Remove the slashes in front to use.
						var disqus_identifier = '/articles/dead-simple-profiling-in-php/';
						var disqus_url = 'http://www.zuttonet.com/articles/dead-simple-profiling-in-php/';

						/* * * DON'T EDIT BELOW THIS LINE * * */
						(function() {
							var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
							dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
							(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
						})();
					</script>
					<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus</a>.</noscript>
					<a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>
                </div>

				<div id="footer-container">
    <span>All content copyright Zutto LLC, 2007-2011.</span>
	<span>Site generated by <a href="http://nanoc.stoneship.org/">nanoc</a>.</span>
    <div id="footer">
        <a href="/">HOME</a>|<a href="/pages/contact">ABOUT ME</a>|<a href="http://www.github.com/rgantt">FORK ME</a>|<a href="/posts.xml"><img src="/images/feed-icon-16x16.gif" style="border:0; vertical-align: bottom;" /></a>
    </div>
</div>
			</div>
	</body>
</html>